(function(e){function t(t){for(var a,i,o=t[0],u=t[1],p=t[2],d=0,c=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(c.length)c.shift()();return s.push.apply(s,p||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},i={app:0},r={app:0},s=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-a4595278":"db4578ad","chunk-018bfd20":"85d487ca","chunk-243128de":"f0e00bcf","chunk-33ab6fbd":"49564de3","chunk-42b4d64c":"80b2c539","chunk-6c91bd16":"7231d562","chunk-7819ef5e":"9d8ec578","chunk-d651afa0":"ebbd815e","chunk-ecb45e5c":"da780517"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-a4595278":1,"chunk-018bfd20":1,"chunk-243128de":1,"chunk-33ab6fbd":1,"chunk-42b4d64c":1,"chunk-6c91bd16":1,"chunk-7819ef5e":1,"chunk-d651afa0":1,"chunk-ecb45e5c":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-a4595278":"5cab1d93","chunk-018bfd20":"fac25744","chunk-243128de":"8ea0ad5a","chunk-33ab6fbd":"cd52732e","chunk-42b4d64c":"04e933ed","chunk-6c91bd16":"7c3ed418","chunk-7819ef5e":"8c156f4f","chunk-d651afa0":"7e157ab2","chunk-ecb45e5c":"6d16a04b"}[e]+".css",r=u.p+a,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var p=s[o],d=p.getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(d===a||d===r))return t()}var c=document.getElementsByTagName("style");for(o=0;o<c.length;o++){p=c[o],d=p.getAttribute("data-href");if(d===a||d===r)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete i[e],l.parentNode.removeChild(l),n(s)},l.href=r;var y=document.getElementsByTagName("head")[0];y.appendChild(l)})).then((function(){i[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=s);var p,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=o(e);var c=new Error;p=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,n[1](c)}r[e]=void 0}};var l=setTimeout((function(){p({type:"timeout",target:d})}),12e4);d.onerror=d.onload=p,document.head.appendChild(d)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var p=window["webpackJsonp"]=window["webpackJsonp"]||[],d=p.push.bind(p);p.push=t,p=p.slice();for(var c=0;c<p.length;c++)t(p[c]);var l=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0918":function(e,t,n){e.exports=n.p+"img/open-pending.aca6cf26.png"},"0f9a":function(e,t,n){"use strict";n.r(t),n.d(t,"ChainEnum",(function(){return s})),n.d(t,"WalletEnum",(function(){return u})),n.d(t,"UserProcessStatus",(function(){return p})),n.d(t,"mainChain",(function(){return d})),n.d(t,"getWallet",(function(){return l}));var a=n("5530"),i=n("d4ec"),r=n("bee2"),s=(n("b0c0"),function(){function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n("e02a");Object(i["a"])(this,e),this.chainId=t,this.name=a,this.logo=r}return Object(r["a"])(e,null,[{key:"ETH",get:function(){return new e(1,"Ethereum mainnet",n("e02a"))}},{key:"Kovan",get:function(){return new e(42,"Kovan")}},{key:"Goerli",get:function(){return new e(5,"Goerli")}},{key:"Rinkeby",get:function(){return new e(4,"Rinkeby")}},{key:"Ropsten",get:function(){return new e(3,"Ropsten")}},{key:"Morden",get:function(){return new e(2,"Morden")}}]),e}()),o={1:s.ETH,2:s.Morden,3:s.Ropsten,4:s.Rinkeby,5:s.Goerli,42:s.Kovan},u=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"MetaMask",get:function(){return"MetaMask"}}]),e}(),p=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"finished",get:function(){return 0}},{key:"waiting",get:function(){return 1}},{key:"success",get:function(){return 2}},{key:"failed",get:function(){return 3}}]),e}(),d=s.Rinkeby,c={selectedAddress:"",showWallet:!1,isLogin:!1,chainEnum:d,isEthum:!1,networkVersion:"",isMetaMask:!1,processStatus:p.finished,processStatusMsg:""};function l(){if(!window.ethereum)return{selectedAddress:null,chainId:"1",networkVersion:null,isMetaMask:!1,isLogin:!1};var e=window.ethereum,t=d.chainId===parseInt(e.chainId);return{selectedAddress:e.selectedAddress,isLogin:e.selectedAddress&&t,showWallet:!e.selectedAddress||!t,chainEnum:o[parseInt(e.chainId)],isEthum:t,networkVersion:e.networkVersion,isMetaMask:e.isMetaMask}}var y={setShowWallet:function(e,t){e.showWallet=t},updateProcessStatus:function(e,t){var n=t.status,a=void 0===n?p.finished:n,i=t.msg,r=void 0===i?"":i;e.processStatus=a,e.processStatusMsg=r},updateState:function(e,t){e=Object.assign(e,Object(a["a"])({},t))}},m={checkLogin:function(e){e.commit,e.dispatch}};t["default"]={namespaced:!0,state:c,mutations:y,actions:m}},1:function(e,t){},10:function(e,t){},11:function(e,t){},2:function(e,t){},2395:function(e,t,n){},2465:function(e,t,n){"use strict";n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return P})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return O}));n("d4ec"),n("ade3");var a=n("1da1"),i=(n("96cf"),n("d3b7"),n("ac1f"),n("5319"),n("bc3a")),r=n.n(i),s=(n("4328"),n("d399")),o=n("a18c"),u=n("4360");function p(e,t){return new Promise((function(n,a){r.a.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){a(e.data)}))}))}r.a.defaults.baseURL="http://api.123dailu.com/",r.a.defaults.timeout=1e4,r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",r.a.interceptors.request.use((function(e){var t=u["a"].state.token;return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.error(e)})),r.a.interceptors.response.use((function(e){return 200===e.status?Promise.resolve(e):Promise.reject(e)}),(function(e){if(e.response.status){switch(e.response.status){case 401:o["a"].replace({path:"/login",query:{redirect:o["a"].currentRoute.fullPath}});break;case 403:Object(s["a"])({message:"登录过期，请重新登录",duration:1e3,forbidClick:!0}),localStorage.removeItem("token"),u["a"].commit("loginSuccess",null),setTimeout((function(){o["a"].replace({path:"/login",query:{redirect:o["a"].currentRoute.fullPath}})}),1e3);break;case 404:Object(s["a"])({message:"网络请求不存在",duration:1500,forbidClick:!0});break;default:Object(s["a"])({message:e.response.data.message,duration:1500,forbidClick:!0})}return Promise.reject(e.response)}}));var d="http://13.125.43.43:8081/api/trade_records/",c="http://13.125.43.43:8081/api/trader_balance/",l="http://13.125.43.43:8081/api/trader_bond_balance/",y="http:13.125.43.43:8081/api/trader_pmr_balance/",m="//13.125.43.43:8081/api/position_mining_events/",f="//13.125.43.43:8081/api/token_price_events/";function T(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(d+t);case 2:if(n=e.sent,!n){e.next=5;break}return e.abrupt("return",n.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(c+t);case 2:if(n=e.sent,console.log(n),!n){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(l+t);case 2:if(n=e.sent,console.log(n),!n){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(y+t);case 2:if(n=e.sent,console.log(n),!n){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function k(e,t){var n=new EventSource(m+e);return n.onmessage=function(n){var a=JSON.parse(n.data);t(e,a)},n}function O(e,t){var n=new EventSource(f+e);return n.onmessage=function(n){var a=JSON.parse(n.data);t(e,a)},n}},3:function(e,t){},"39e1":function(e,t,n){e.exports=n.p+"img/open-fail.d6f74f62.png"},4:function(e,t){},4360:function(e,t,n){"use strict";n("d3b7"),n("ddb0"),n("ac1f"),n("5319");var a=n("2b0e"),i=n("2f62"),r={token:function(e){return e.user.token}},s=r;a["a"].use(i["a"]);var o=n("c653"),u=o.keys().reduce((function(e,t){var n=t.replace(/^\.\/(.*)\.\w+$/,"$1"),a=o(t);return e[n]=a.default,e}),{}),p=new i["a"].Store({modules:u,getters:s});t["a"]=p},4908:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-popup",{staticClass:"derify-popup small",attrs:{round:"",closeable:!1},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"open-status-popup"},[e.status===e.UserProcessStatus.waiting?[a("img",{staticClass:"open-status-icon",attrs:{src:n("0918"),alt:""}}),a("div",{staticClass:"open-status-text"},[e._v(e._s(e._f("dfv")(e.msg,"正在执行交易，请稍侯")))])]:e._e(),e.status===e.UserProcessStatus.success?[a("img",{staticClass:"open-status-icon",attrs:{src:n("8f0c"),alt:""}}),a("div",{staticClass:"open-status-text"},[e._v(e._s(e._f("dfv")(e.msg,"正在执行交易，请稍侯")))])]:e._e(),e.status===e.UserProcessStatus.failed?[a("img",{staticClass:"open-status-icon",attrs:{src:n("39e1"),alt:""}}),a("div",{staticClass:"open-status-text"},[e._v(e._s(e._f("dfv")(e.msg,"正在执行交易，请稍侯")))]),a("div",{staticClass:"system-popup-buttons padding"},[a("div",{staticClass:"system-popup-button confirm"},[e._v("确认")])])]:e._e()],2)])},i=[],r=n("0f9a"),s={data:function(){return{show:!1,msg:"",status:r["UserProcessStatus"].finished,UserProcessStatus:r["UserProcessStatus"]}},methods:{close:function(){this.$emit("closeOpenStatusPopup",!1,this.status)},updateData:function(e){this.show=e.show,this.msg=e.msg,this.status=e.status}}},o=s,u=(n("a464"),n("2877")),p=Object(u["a"])(o,a,i,!1,null,"53a84d3d",null);t["a"]=p.exports},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("ac1f"),n("5319"),n("4d63"),n("25f0");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s=(n("7c55"),n("2877")),o={},u=Object(s["a"])(o,i,r,!1,null,null,null),p=u.exports,d=n("a18c"),c=n("4360"),l=n("b970"),y=(n("833e"),n("a4b1"),n("313e")),m=(n("9108"),n("4de4"),n("fa7d"));a["a"].filter("fck",(function(e,t,n){return Object(m["c"])(e,t,n)})),a["a"].filter("dfv",(function(e,t){return Object(m["b"])(e,t)})),a["a"].filter("amountFormt",(function(e,t,n,a){return Object(m["a"])(e,t,n,a)}));n("f810");var f=n("a925"),T=n("4908"),b=a["a"].extend(T["a"]),h={instance:null};b.install=function(e){var t=e.status,n=e.msg;return h.instance?(console.log(h.instance),h.instance.updateData({show:t>0,status:t,msg:n})):(h.instance=new b({data:{show:t>0,status:t,msg:n}}).$mount(),document.body.appendChild(h.instance.$el),a["a"].nextTick((function(){h.instance.visible=!1}))),h.instance};var v=b,g=n("0f9a"),w="zh";try{var P=sessionStorage.getItem("locale"),D=JSON.parse(P||"{}");D.lng&&(w=D.lng)}catch(S){}a["a"].use(f["a"]);var k=new f["a"]({locale:w,messages:{zh:n("d1cb"),en:n("5eeb")}});a["a"].prototype.$echarts=y,a["a"].use(l["a"]),a["a"].config.productionTip=!1,Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds(),W:["日","一","二","三","四","五","六"][this.getDay()]};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var O=new a["a"]({router:d["a"],i18n:k,store:c["a"],render:function(e){return e(p)}}).$mount("#app");function x(){var e=Object(g["getWallet"])();e.showWallet=c["a"].state.user.showWallet,c["a"].commit("user/updateState",e),c["a"].commit("contract/SET_WALLET_ADDRESS",e.selectedAddress)}a["a"].prototype.$userProcessBox=v.install,a["a"].prototype.$loginWallet=function(){var e=Object(g["getWallet"])();this.$store.commit("user/updateState",e)},window.onload=function(){window.ethereum&&(window.ethereum.on("accountsChanged",(function(){x()})),window.ethereum.on("chainChanged",(function(){x()}))),x()},window.vexstore=c["a"],window.vuexApp=O},"5bea":function(e,t,n){},"5eeb":function(e){e.exports=JSON.parse('{"lng":"en","global":{"click connect wallet":"click connect wallet"},"navbar":{"Home":"Home","Trade":"Trade","Rewards":"Rewards","Partners":"Partners","Data":"Data","Connect Wallet":"Connect Wallet","Click To Log In":"Click To Log In","Wallet Address":"Wallet Address","Click to connect your wallet":"Click to connect your wallet"},"Brokers":{"Brokers":"Brokers","AccBalance":"Acc. Balance","Withdraw":"Withdraw","DailyEarning":"Daily Earning","AccumulatedEarning":"Accumulated Earning","PrivilegeValiduntil":"Privilege Valid until","MyReferralPage":"My referral page","Days":"Days","Until":"Until","Burn":"Burn","Note":"Note","NoteDerify1":"Derify has Partner system, traders will be trading on our Partner’s page, Derify does not directly provide service.","NoteDerify2":"Partners will receive trading fee rewards and potential DRF rewards.","NoteDerify3":"Partners need to burn eDRF to maintain its privilege. (Current price is 600 eDRF per day).","NoteDerify4":"Once your privilege is expired, you will not be able to receive rewards, but your can resume as our Partner whenever you like.","AccountHistory":"Account History","Type":"Type","Amount":"Amount","Balance":"Balance","Time":"Time","Earnings":"Earnings","TraderInfo":"Trader Info","TraderAddress":"Trader Address","RegistrationDate":"Registration Date","YouPartner":"You are not a Partner","ApplyPartner":"Apply to be Partner","BurnEDRF ":"Burn 60,000 eDRF to get Partners Privilege","AccountBalance":"Account Balance","YouPrivilege":"You Purchased Partner Privilege! ","Close":"Close","Burns":"Burn","Balances":"Balance","UnitPrice":"Unit Price","BurnAmount":"Burn Amount","ValidDays":"Valid Period","NoMoreData":"No more data","cancel":"cancel","affirm":"affirm"},"data":{"Data":"Data","TradingVolume":"Trading Volume","All":"All","TradFeeEarning":"Trad Fee Earning","PositionVolume":"Position Volume","TotalLong":"Total Long","TotalShort":"Total Short","InsurancePool":"Insurance Pool","InsurancePoolBalance":"Insurance Pool Balance","Info":"Info","Price":"Price","TotalDestroyedVolume":"Total Destroyed Volume","BuyBackFundBalance":"Buy Back Fund Balance","BondPoolBalance":"Bond Pool Balance","NoMoreData":"No more data","dealingSlip":"dealing Slip","contract":"contract","type":"type","freightSpace":"freight Space","Time":"Time","open":"开","more":"多"}}')},6:function(e,t){},6189:function(e,t,n){"use strict";n.r(t);var a=n("1da1"),i=n("5530"),r=(n("96cf"),n("d3b7"),n("c740"),n("6b43")),s=n("9108"),o=n("2465"),u=n("f810"),p={wallet_address:void 0!==window.ethereum?ethereum.selectedAddress:void 0,account:Object(r["a"])("account")||null,pairs:[{key:"BTC",name:"BTC / USDT",num:2030.23,percent:1.23,enable:!0,address:u["d"].BTC},{key:"ETH",name:"ETH / USDT",num:2930.79,percent:-1.23,enable:!0,address:u["d"].ETH},{key:"BNB",name:"BNB / USDT",num:0,percent:0,enable:!1,address:"0xf3a6679b266899042276804930b3bfbaf807f15b"},{key:"UNI",name:"UNI / USDT",num:0,percent:0,enable:!1,address:"0xf3a6679b266899042276804930b3bfbaf807f15b"}],curPairKey:"ETH",contractData:{positionChangeFeeRatio:"-",traderOpenUpperBound:{size:0,amount:0},longPmrRate:"-",shortPmrRate:"-",tokenPriceRate:"-",curSpotPrice:0},accountData:{balance:0,marginBalance:0,totalMargin:0,marginRate:0},positionData:[],limitPositionData:[],curSpotPrice:0},d={SET_WALLET_ADDRESS:function(e,t){e.wallet_address=t,Object(r["b"])("wallet_address",t)},SET_ACCOUNT:function(e,t){e.account=t,Object(r["b"])("account",t)},SET_CURPAIRKEY:function(e,t){e.curPairKey=t},SET_CURSPOTPRICE:function(e,t){e.curSpotPrice=t},SET_CONTRACT_DATA:function(e,t){e.contractData=Object.assign({},e.contractData,Object(i["a"])({},t))},SET_ACCOUNT_DATA:function(e,t){e.accountData=Object.assign(e.accountData,t)},SET_POSITION_DATA:function(e,t){e.positionData=t},SET_LIMIT_POSITION_DATA:function(e,t){e.limitPositionData=t}},c={loginWallet:function(e){e.commit,e.dispatch;return new Promise((function(e,t){s["b"]().then((function(t){e(t)})).catch((function(e){return t(e)}))}))},depositAccount:function(e,t){var n=e.state;return new Promise((function(e,a){n.wallet_address?s["a"](n.wallet_address).deposit(t).then((function(t){return e(t)})).catch((function(e){return a(e)})):a(new Error("log in wallet first"))}))},withdrawAccount:function(e,t){var n=e.state;return new Promise((function(e,a){n.wallet_address?s["a"](n.wallet_address).withdraw(t).then((function(t){return e(t)})).catch((function(e){return a(e)})):a(new Error("log in wallet first"))}))},getSpotPrice:function(e){var t=e.state,n=e.commit;return new Promise((function(e,a){var i=t.pairs.findIndex((function(e){return e.key===t.curPairKey}));void 0===i&&(i=0);var r=t.pairs[i];s["a"](t.wallet_address).getSpotPrice(r.address).then((function(t){n("SET_CURSPOTPRICE",t),e(t)})).catch((function(e){return a(e)}))}))},openPosition:function(e,t){var n=e.state,a=t.side,i=t.size,r=t.openType,o=t.price,u=t.leverage;return new Promise((function(e,t){var p=n.pairs.findIndex((function(e){return e.key===n.curPairKey}));void 0===p&&(p=0);var d=n.pairs[p],c={token:d.address,side:a,openType:r,size:i,price:o,leverage:u};s["a"](n.wallet_address).openPosition(c).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},closePosition:function(e,t){var n=e.state,a=t.coinAddress,i=t.side,r=t.size;return new Promise((function(e,t){s["a"](n.wallet_address).closePosition(a,i,r).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},orderStopPosition:function(e,t){var n=e.state,a=t.coinAddress,i=t.side,r=t.stopType,o=t.stopPrice;return new Promise((function(e,t){var u={token:a,trader:n.wallet_address,side:i,stopType:r,stopPrice:o};s["a"](n.wallet_address).orderStopPosition(u).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},closeAllPositions:function(e){var t=e.state;return new Promise((function(e,n){s["a"](t.wallet_address).closeAllPositions().then((function(t){e(t)})).catch((function(e){return n(e)}))}))},cancleOrderedPosition:function(e,t){var n=e.state,a=t.coinAddress,i=t.orderType,r=t.side,o=t.timestamp;return new Promise((function(e,t){var u={marketIdAddress:a,trader:n.wallet_address,orderType:i,side:r,timestamp:o};s["a"](n.wallet_address).cancleOrderedPosition(u).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},cancleAllOrderedPositions:function(e,t){var n=e.state,a=t.coinAddress;return new Promise((function(e,t){s["a"](n.wallet_address).cancleAllOrderedPositions(a,n.wallet_address).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},loadHomeData:function(e){var t=e.state,n=e.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a["a"])(regeneratorRuntime.mark((function e(){var a,r,o,p,d,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a={curSpotPrice:0,positionChangeFeeRatio:0},t.wallet_address){e.next=3;break}return e.abrupt("return",{});case 3:return r=s["a"](t.wallet_address),o=t.pairs.findIndex((function(e){return e.key===t.curPairKey})),void 0===o&&(o=0),p=t.pairs[o],e.next=9,r.getSpotPrice(p.address);case 9:return a.curSpotPrice=e.sent,n("SET_CONTRACT_DATA",a),e.next=13,r.getPositionChangeFeeRatio(p.address);case 13:return a.positionChangeFeeRatio=e.sent,n("SET_CONTRACT_DATA",a),d=a.curSpotPrice,c=10,e.next=19,r.getTraderOpenUpperBound({marketIdAddress:p.address,trader:t.wallet_address,openType:i,price:Object(u["k"])(d),leverage:Object(u["j"])(c)});case 19:return a.traderOpenUpperBound=e.sent,n("SET_CONTRACT_DATA",a),e.next=23,r.getSysOpenUpperBound({marketIdAddress:p.address,side:i});case 23:return a.sysOpenUpperBound=e.sent,n("SET_CONTRACT_DATA",a),e.abrupt("return",a);case 26:case"end":return e.stop()}}),e)})))()},loadAccountData:function(e){var t=e.state,n=e.commit;return Object(a["a"])(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.wallet_address){e.next=2;break}return e.abrupt("return",{});case 2:return a=s["a"](t.wallet_address),e.next=5,a.getTraderAccount(t.wallet_address);case 5:return i=e.sent,e.next=8,a.getTraderVariables(t.wallet_address);case 8:return r=e.sent,Object.assign(i,{marginBalance:r.marginBalance,totalPositionAmount:r.totalPositionAmount,marginRate:r.marginRate}),n("SET_ACCOUNT_DATA",i),console.log("loadAccountData",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))()},loadPositionData:function(e){var t=e.state,n=e.commit;return Object(a["a"])(regeneratorRuntime.mark((function e(){var a,i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.wallet_address){e.next=2;break}return e.abrupt("return",{});case 2:return a=s["a"](t.wallet_address),i=t.pairs.findIndex((function(e){return e.key===t.curPairKey})),void 0===i&&(i=0),r=t.pairs[i],e.next=8,a.getTraderAllPosition(t.wallet_address,r.address);case 8:return o=e.sent,n("SET_POSITION_DATA",o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))()},loadTradeRecords:function(e){var t=e.state;e.commit;return Object(o["d"])(t.wallet_address)},getTraderOpenUpperBound:function(e,t){var n=e.state,i=e.commit,r=t.openType,o=t.price,u=t.leverage;return Object(a["a"])(regeneratorRuntime.mark((function e(){var t,a,p,d,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.pairs.findIndex((function(e){return e.key===n.curPairKey})),void 0===t&&(t=0),a=n.pairs[t],p=a.address,d=s["a"](n.wallet_address),e.next=7,d.getTraderOpenUpperBound({marketIdAddress:p,trader:n.wallet_address,openType:r,price:o,leverage:u});case 7:return c=e.sent,l=Object.assign({},n.contractData,{traderOpenUpperBound:c}),i("SET_CONTRACT_DATA",l),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))()},getTraderTradeBalanceDetail:function(e){var t=e.state;e.commit;return Object(o["c"])(t.wallet_address)},getPositionChangeFee:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,i,r,o,u,p,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,e.commit,e.dispatch,i=t.side,r=t.actionType,o=t.size,u=t.price,p=a.pairs.findIndex((function(e){return e.key===a.curPairKey})),void 0===p&&(p=0),d=a.pairs[p],n.abrupt("return",s["a"](a.wallet_address).getTradingFee(d.address,i,r,o,u));case 6:case"end":return n.stop()}}),n)})))()},getTradingFee:function(e,t){var n=e.state,a=(e.commit,e.dispatch,t.size),i=t.price,r=n.pairs.findIndex((function(e){return e.key===n.curPairKey}));void 0===r&&(r=0);var o=n.pairs[r];return s["a"](n.wallet_address).getTradingFee(o.address,a,i)},onDeposit:function(e){var t=e.state,n=(e.commit,e.dispatch);s["a"](t.wallet_address).onDeposit(t.wallet_address,(function(){n("loadAccountData")}))},onWithDraw:function(e){var t=e.state,n=(e.commit,e.dispatch);s["a"](t.wallet_address).onDeposit(t.wallet_address,(function(){n("loadAccountData")}))}};t["default"]={namespaced:!0,state:p,mutations:d,actions:c}},"64aa":function(e,t,n){"use strict";n.r(t);var a=n("1da1"),i=n("5530"),r=(n("96cf"),n("f810")),s=n("9108"),o=n("6b43"),u=n("2465"),p={wallet_address:void 0!==window.ethereum?ethereum.selectedAddress:void 0,account:Object(o["a"])("account")||null,pairs:[{key:"BTC",name:"BTC / USDT",num:2030.23,percent:1.23,enable:!0,address:r["d"].BTC},{key:"ETH",name:"ETH / USDT",num:2930.79,percent:-1.23,enable:!0,address:r["d"].ETH},{key:"BNB",name:"BNB / USDT",num:0,percent:0,enable:!1,address:"0xf3a6679b266899042276804930b3bfbaf807f15b"},{key:"UNI",name:"UNI / USDT",num:0,percent:0,enable:!1,address:"0xf3a6679b266899042276804930b3bfbaf807f15b"}],curPairKey:"ETH",accountData:{totalPositionAmount:0},pmrReward:0,bondInfo:{bondBalance:0,bondReturnBalance:0,bondWalletBalance:0,bondAnnualInterestRate:0}},d={updateSate:function(e,t){Object.assign(e,Object(i["a"])({},t))}},c={loadEarningData:function(e){var t=e.state,n=e.commit;e.dispatch;return Object(a["a"])(regeneratorRuntime.mark((function e(){var a,r,o,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s["a"](t.wallet_address),e.next=3,a.getPMReward(t.wallet_address);case 3:return r=e.sent,e.next=6,a.getTraderVariables(t.wallet_address);case 6:return o=e.sent,e.next=9,a.getBondInfo(t.wallet_address);case 9:return u=e.sent,p={pmrReward:r,accountData:Object(i["a"])({},o),bondInfo:u},n("updateSate",p),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})))()},withdrawPMReward:function(e,t){var n=e.state,a=(e.commit,e.dispatch,t.amount),i=s["a"](n.wallet_address);return i.withdrawPMReward(a)},withdrawBond:function(e,t){var n=e.state,a=(e.commit,e.dispatch,t.amount),i=s["a"](n.wallet_address);return i.withdrawBond(a)},exchangeBond:function(e,t){var n=e.state,a=(e.commit,e.dispatch,t.amount),i=t.bondAccountType,r=s["a"](n.wallet_address);return r.exchangeBond({amount:a,bondAccountType:i})},depositBondToBank:function(e,t){var n=e.state,a=(e.commit,e.dispatch,t.amount),i=t.bondAccountType,r=s["a"](n.wallet_address);return r.depositBondToBank({amount:a,bondAccountType:i})},redeemBondFromBank:function(e,t){var n=e.state,a=(e.commit,e.dispatch,t.amount),i=t.bondAccountType,r=s["a"](n.wallet_address);return r.redeemBondFromBank({amount:a,bondAccountType:i})},getTraderPMRBalance:function(e){var t=e.state;e.commit,e.dispatch,s["a"](t.wallet_address);return Object(u["f"])(t.wallet_address)},getTraderBondBalance:function(e){var t=e.state;e.commit,e.dispatch,s["a"](t.wallet_address);return Object(u["e"])(t.wallet_address)}};t["default"]={namespaced:!0,state:p,mutations:d,actions:c}},"6b43":function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";n=t?sessionStorage.getItem(e):localStorage.getItem(e);var a=n?JSON.parse(n):null;return a&&a.expiration>Date.now()?a.data:null}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6048e5;if(!t)return r(e),!1;var i={data:t,expiration:Date.now()+a};n?sessionStorage.setItem(e,JSON.stringify(i)):localStorage.setItem(e,JSON.stringify(i))}function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?sessionStorage.removeItem(e):localStorage.removeItem(e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},7:function(e,t){},"7c55":function(e,t,n){"use strict";n("2395")},8:function(e,t){},"8f0c":function(e,t,n){e.exports=n.p+"img/open-success.9cddb9f2.png"},9:function(e,t){},9108:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));n("d4ec");var a=n("1da1"),i=(n("96cf"),n("5d41"),n("2ca0"),n("a6fd"),n("d3b7"),n("7ed3"),n("f810"));function r(e){var t=new i["f"](e);return i["e"]?new Proxy(t,{get:function(e,t,n){var i=Reflect.get.apply(Reflect,arguments);return i instanceof Function&&!t.startsWith("__")?new Proxy(i,{apply:function(e,n,i){try{var r=Reflect.apply.apply(Reflect,arguments);return r instanceof Promise?(console.log("request.contract."+t+",args="+JSON.stringify(i)),Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return n=e.sent,console.log("response.contract."+t+",args="+JSON.stringify(i)+",ret=",n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()):(console.log("contract."+t+",args="+JSON.stringify(i)+",ret=",r),r)}catch(s){console.log("contract."+t+",args="+JSON.stringify(i)+",error=",s)}}}):i}}):t}function s(){return window.ethereum?new Promise((function(e,t){window.ethereum.request({method:"eth_requestAccounts"}).then((function(t){return e(t)})).catch((function(e){return t(e)}))})):new Promise((function(e,t){t(new Error("please install Metamask"))}))}},a18c:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var a=n("2b0e"),i=n("8c4f");n("4360"),n("0f9a");a["a"].use(i["a"]);var r=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-33ab6fbd")]).then(n.bind(null,"b3d7"))}},{path:"/exchange",name:"exchange",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-33ab6fbd")]).then(n.bind(null,"b3d7"))}},{path:"/broker",name:"broker",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-6c91bd16")]).then(n.bind(null,"60fd"))}},{path:"/data",name:"data",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-243128de")]).then(n.bind(null,"c725"))}},{path:"/earnings",name:"earnings",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-42b4d64c")]).then(n.bind(null,"7255"))}},{path:"/detail",name:"detail",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-018bfd20")]).then(n.bind(null,"d558"))}},{path:"/transfer",name:"transfer",component:function(){return n.e("chunk-ecb45e5c").then(n.bind(null,"ac0d"))}},{path:"/account",name:"account",component:function(){return Promise.all([n.e("chunk-a4595278"),n.e("chunk-7819ef5e")]).then(n.bind(null,"e38c"))}},{path:"/financialDetails",name:"financialDetails",component:function(){return n.e("chunk-d651afa0").then(n.bind(null,"ad2a"))}}],s=new i["a"]({mode:"history",base:"/",routes:r});t["a"]=s},a464:function(e,t,n){"use strict";n("5bea")},a4b1:function(e,t,n){},c653:function(e,t,n){var a={"./contract.js":"6189","./earnings.js":"64aa","./user.js":"0f9a"};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="c653"},d1cb:function(e){e.exports=JSON.parse('{"lng":"zh","global":{"click connect wallet":"点击连接钱包"},"navbar":{"Home":"首页","Trade":"交易","Rewards":"收益","Partners":"经纪商","Data":"数据","Connect Wallet":"连接钱包","Click To Log In":"点击登录","Wallet Address":"钱包地址","Click to connect your wallet":"连接钱包"},"Brokers":{"Brokers":"经济商","AccBalance":"账户余额","Withdraw":"提现","DailyEarning":"今日收入","AccumulatedEarning":"累计收入","PrivilegeValiduntil":"经纪商权益有效期","MyReferralPage":"我的推广页面","Days":"天","Until":"至","Burn":"充值","Note":"说明","NoteDerify1":"平台采取经纪商制度。所有的交易者只能通过访问经纪商的交易页面进行交易，Derify protocol并不直接面向交易者提供服务","NoteDerify2":"经纪商可以持续获得手续费奖励（未来还将获得额外的DRF奖励）。","NoteDerify3":"经纪商需要燃烧eDRF才能保持享有该权益（当前，每600个eDRF可以维持一天的经纪商收益）。","NoteDerify4":" 权益有效期到期后将无法获得经纪商奖励，但仍会保持经纪商身份，您可以随时燃烧eDRF恢复经纪商奖励权益。","AccountHistory":"账户流水","Type":"类型","Amount":"金额","Balance":"余额","Time":"时间","Earnings":"收入","TraderInfo":"交易者信息","TraderAddress":"交易者地址","RegistrationDate":"注册时间","YouPartner":"您尚未开通经纪商","ApplyPartner":"申请成为经纪商","BurnEDRF":"您需要燃烧60000个eDRF成为经纪商","AccountBalance":"可用余额","YouPrivilege":"您已成功开通经纪商身份","Close":"关闭","Burns":"燃烧","Balances":"当前余额","UnitPrice":"单价","BurnAmount":"燃烧数量","ValidDays":"有效期","NoMoreData":"没有更多了","cancel":"取消","affirm":"确认"},"data":{"Data":"数据","TradingVolume":"交易量","All":"全部","TradFeeEarning":"手续费收入","PositionVolume":"持仓量","TotalLong":"多头总仓位","TotalShort":"空头总仓位","InsurancePool":"保险金池","InsurancePoolBalance":"保险金池余额","Info":"指标","Price":"指数","TotalDestroyedVolume":"已销毁量","BuyBackFundBalance":"DRF回购基金余额","BondPoolBalance":"债券池余额","NoMoreData":"没有更多了","dealingSlip":"交易记录","contract":"合约","type":"类型","freightSpace":"仓位","Time":"时间","open":"开","more":"多"},"Rewards":{"PositionMiningReward":"持仓挖矿收益","PositionHeld":"持仓额","AccumulatedReward":"历史累计收益","TransactionHistory":"流水明细","Withdraw":"提现","PositionMining":"持仓挖矿","Type":"类型","Amount":"金额","Balance":"余额","Time":"时间","Earning":"收入","StakEquity":"质押权益","StakAmount":"质押量","DailyYield":"每日产量","Redeem":"赎回","Staking":"质押","Bond":"债券","Redeemable":"可兑换债券","DepoAmoun":"收益计划存入","Deposit":"存入","Max":"可提现/可赎回/可质押/可存入/可兑换","Amounts":"提现/赎回/质押/存入/兑换数量","All":"全部提现/赎回/质押/存入/兑换"}}')},e02a:function(e,t,n){e.exports=n.p+"img/eth-logo.9e7c6b68.png"},f810:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return w})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return k})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return M})),n.d(t,"i",(function(){return A})),n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return R})),n.d(t,"f",(function(){return C})),n.d(t,"b",(function(){return F}));var a=n("ade3"),i=n("b85c"),r=n("1da1"),s=n("d4ec"),o=n("bee2"),u=(n("96cf"),n("d3b7"),n("25f0"),n("b680"),n("99e5")),p=n.n(u),d=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_exchange",type:"address"},{internalType:"address",name:"_tokenUSD",type:"address"},{internalType:"address",name:"_tokenBDRF",type:"address"},{internalType:"uint256",name:"_bondAnnualInterestRate",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IDerifyBond.BondUpdateType",name:"bondUpdateType",type:"uint8"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"int256",name:"amount",type:"int256"},{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"BondUpdates",type:"event"},{inputs:[],name:"bondAnnualInterestRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"exchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"tokenBDRF",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"tokenUSD",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"payBond",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawBond",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"enum IDerifyBond.BondAccountType",name:"bondAccountType",type:"uint8"}],name:"exchangeBond",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"enum IDerifyBond.BondAccountType",name:"bondAccountType",type:"uint8"}],name:"depositBondToBank",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"enum IDerifyBond.BondAccountType",name:"bondAccountType",type:"uint8"}],name:"redeemBondFromBank",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"bondReturn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"getBondInfo",outputs:[{internalType:"uint256",name:"bondBalance",type:"uint256"},{internalType:"uint256",name:"bondReturnBalance",type:"uint256"},{internalType:"uint256",name:"bondWalletBalance",type:"uint256"},{internalType:"uint256",name:"bondAnnualInterestRate",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyBond.BondAccountType",name:"bondAccountType",type:"uint8"}],name:"getExchangeBondSizeUpperBound",outputs:[{internalType:"uint256",name:"maxBondSize",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getSysExchangeBondSizeUpperBound",outputs:[{internalType:"uint256",name:"sysMaxBondSize",type:"uint256"}],stateMutability:"view",type:"function",constant:!0}],c=[{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"address",name:"_exchange",type:"address"},{internalType:"address",name:"_bond",type:"address"},{internalType:"address",name:"_broker",type:"address"},{internalType:"address",name:"_staking",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"enum IDerifyDerivative.TradeType",name:"tradeType",type:"uint8"},{indexed:!1,internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{indexed:!1,internalType:"uint256",name:"size",type:"uint256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tradingFee",type:"uint256"},{indexed:!1,internalType:"int256",name:"positionChangeFee",type:"int256"},{indexed:!1,internalType:"int256",name:"pnlUsdt",type:"int256"},{indexed:!1,internalType:"uint256",name:"pnlBond",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Close",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"enum IDerifyDerivative.TradeType",name:"tradeType",type:"uint8"},{indexed:!1,internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{indexed:!1,internalType:"uint256",name:"size",type:"uint256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"},{indexed:!1,internalType:"uint256",name:"leverage",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tradingFee",type:"uint256"},{indexed:!1,internalType:"int256",name:"positionChangeFee",type:"int256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Open",type:"event"},{inputs:[],name:"bond",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"broker",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"exchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"gRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"kRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"miningRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"roRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"staking",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"tradingFeeRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"uRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tradingFeeRatio",type:"uint256"},{internalType:"uint256",name:"_uRatio",type:"uint256"},{internalType:"uint256",name:"_miningRatio",type:"uint256"},{internalType:"uint256",name:"_kRatio",type:"uint256"},{internalType:"uint256",name:"_gRatio",type:"uint256"},{internalType:"uint256",name:"_roRatio",type:"uint256"}],name:"updateRatios",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IDerifyDerivative.TradeType",name:"tradeType",type:"uint8"},{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"}],name:"openMarketPricePosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"limitPrice",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"}],name:"orderLimitPricePosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"enum IDerifyDerivative.StopType",name:"stopType",type:"uint8"},{internalType:"uint256",name:"stopPrice",type:"uint256"}],name:"orderStopPosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IDerifyDerivative.TradeType",name:"tradeType",type:"uint8"},{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"size",type:"uint256"}],name:"closePositionByTrader",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.OrderType",name:"orderType",type:"uint8"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"}],name:"cancleOrderedStopPosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"timestamp",type:"uint256"}],name:"cancleOrderedLimitPosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"cancleAllOrderedPositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"}],name:"closePositionByLiquidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getSpotPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"price",type:"uint256"}],name:"setSpotPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getSideTotalAmount",outputs:[{internalType:"uint256",name:"longTotalAmount",type:"uint256"},{internalType:"uint256",name:"shortTotalAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPositionChangeFeeRatio",outputs:[{internalType:"int256",name:"ratio",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenTotalUnrealizedPnl",outputs:[{internalType:"int256",name:"tokenTotalUnrealizedProfit",type:"int256"},{internalType:"int256",name:"tokenTotalUnrealizedLoss",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllTraders",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"getTraderDerivativePositions",outputs:[{components:[{internalType:"bool",name:"isUsed",type:"bool"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.Position",name:"long",type:"tuple"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.Position",name:"short",type:"tuple"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.Position[]",name:"longOrderOpenPosition",type:"tuple[]"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.Position[]",name:"shortOrderOpenPosition",type:"tuple[]"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.StopPosition",name:"longOrderStopProfitPosition",type:"tuple"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.StopPosition",name:"longOrderStopLossPosition",type:"tuple"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.StopPosition",name:"shortOrderStopProfitPosition",type:"tuple"},{components:[{internalType:"bool",name:"isUsed",type:"bool"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct IDerifyDerivative.StopPosition",name:"shortOrderStopLossPosition",type:"tuple"}],internalType:"struct IDerifyDerivative.DerivativePositions",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],name:"getTradingFee",outputs:[{internalType:"uint256",name:"tradingFee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"enum IDerifyDerivative.ActionType",name:"actionType",type:"uint8"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],name:"getPositionChangeFee",outputs:[{internalType:"int256",name:"positionChangeFee",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{internalType:"uint256",name:"sysMaxOpenLongSize",type:"uint256"},{internalType:"uint256",name:"sysMaxOpenShortSize",type:"uint256"}],name:"operateOrderedLimitPositions",outputs:[],stateMutability:"nonpayable",type:"function"}],l=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_tokenUSD",type:"address"},{internalType:"uint256",name:"_marginMaintenanceRatio",type:"uint256"},{internalType:"uint256",name:"_marginLiquidationRatio",type:"uint256"},{internalType:"uint256",name:"_thetaRatio",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"int256",name:"balance",type:"int256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IDerifyExchange.FeeType",name:"feeType",type:"uint8"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"int256",name:"amount",type:"int256"},{indexed:!1,internalType:"int256",name:"balance",type:"int256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"TraderBalanceUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"int256",name:"amount",type:"int256"},{indexed:!1,internalType:"int256",name:"balance",type:"int256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"gasFeePool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"insuranceFundPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"liquidityPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"marginLiquidationRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"marginMaintenanceRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"thetaRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"tokenUSD",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"enum IDerifyExchange.AccountType",name:"from",type:"uint8"},{internalType:"enum IDerifyExchange.AccountType",name:"to",type:"uint8"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IDerifyExchange.FeeType",name:"feeType",type:"uint8"},{internalType:"address",name:"trader",type:"address"},{internalType:"int256",name:"amount",type:"int256"}],name:"operateTraderBalance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"getTraderBalance",outputs:[{internalType:"int256",name:"balance",type:"int256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"exchangeBondByInsuranceFund",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"amount",type:"int256"},{internalType:"address",name:"to",type:"address"}],name:"operateLiquidityBalance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"transferGasFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"enum IDerifyExchange.OpenType",name:"openType",type:"uint8"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"}],name:"openPosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"size",type:"uint256"}],name:"closePosition",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"closeAllPositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"sysLoss",type:"uint256"}],name:"getTraderMarginCompensation",outputs:[{internalType:"uint256",name:"traderMarginCompensation",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getAllTraders",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getSysTotalPositionAmount",outputs:[{internalType:"uint256",name:"sysTotalPositionAmount",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getSysTotalProfitAndLoss",outputs:[{internalType:"int256",name:"sysNetPnl",type:"int256"},{internalType:"int256",name:"sysTotalUnrealizedProfit",type:"int256"},{internalType:"int256",name:"sysTotalUnrealizedLoss",type:"int256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getSysTotalNetProfitDerivative",outputs:[{internalType:"uint256",name:"sysTotalNetProfit",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyExchange.OpenType",name:"openType",type:"uint8"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"}],name:"getTraderOpenUpperBound",outputs:[{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"}],name:"getSysOpenUpperBound",outputs:[{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"trader",type:"address"},{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"}],name:"getCloseUpperBound",outputs:[{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"getTraderAccount",outputs:[{internalType:"int256",name:"balance",type:"int256"},{internalType:"int256",name:"marginBalance",type:"int256"},{internalType:"uint256",name:"totalMargin",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"getTraderVariables",outputs:[{internalType:"int256",name:"marginBalance",type:"int256"},{internalType:"uint256",name:"totalPositionAmount",type:"uint256"},{internalType:"int256",name:"marginRate",type:"int256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"leverage",type:"uint256"},{internalType:"uint256",name:"averagePrice",type:"uint256"}],name:"getTraderPositionVariables",outputs:[{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"int256",name:"unrealizedPnl",type:"int256"},{internalType:"int256",name:"returnRate",type:"int256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"enum IDerifyDerivative.Side",name:"side",type:"uint8"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{internalType:"uint256",name:"size",type:"uint256"},{internalType:"uint256",name:"marginBalance",type:"uint256"},{internalType:"uint256",name:"totalPositionAmount",type:"uint256"}],name:"getTraderPositionLiquidatePrice",outputs:[{internalType:"uint256",name:"liquidatePrice",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"openTrader",type:"address"},{internalType:"address",name:"openToken",type:"address"},{internalType:"address",name:"closeTrader",type:"address"},{internalType:"address",name:"closeToken",type:"address"},{internalType:"uint256",name:"estimateGasFee",type:"uint256"}],name:"operateOrderedPositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"partLiquidateTraders",type:"address[]"},{internalType:"address[]",name:"liquidateTraders",type:"address[]"},{internalType:"uint256",name:"estimateGasFee",type:"uint256"}],name:"operateLiquidatePositions",outputs:[],stateMutability:"nonpayable",type:"function"}],y=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_exchange",type:"address"},{internalType:"address",name:"_tokenUSD",type:"address"},{internalType:"address",name:"_tokenDRF",type:"address"},{internalType:"address",name:"_tokenEDRF",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IDerifyStaking.PMRewardUpdateType",name:"pmrRewardUpdateType",type:"uint8"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"int256",name:"amount",type:"int256"},{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"PMRewardUpdates",type:"event"},{inputs:[],name:"exchange",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"positionMiningRewardPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"tokenDRF",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"tokenEDRF",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"tokenUSD",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"addPMRewardByTradingFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"traders",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],name:"updateTradersPMReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawPMReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"trader",type:"address"}],name:"getPMReward",outputs:[{internalType:"uint256",name:"pmrReward",type:"uint256"}],stateMutability:"view",type:"function",constant:!0}],m=[{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"minter_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"address",name:"newMinter",type:"address"}],name:"MinterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"minter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"minter_",type:"address"}],name:"setMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],f=[{inputs:[{internalType:"address",name:"minter_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"address",name:"newMinter",type:"address"}],name:"MinterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"minter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"minter_",type:"address"}],name:"setMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],T={DerifyBond:{abi:d,address:"0xf5c6A2E323b657f796896f7C93906f43a03A997A"},DerifyDerivative:{abi:c,BTC:{address:"0x8873798304069F720874aAB3DED9ed372E0Fa24d",token:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599"},ETH:{address:"0x93944255B679D7a10D64C4fB2d88b02208eE0Daf",token:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"}},DerifyExchange:{abi:l,address:"0xA0DA26db9649C21EdB2A91f03ECF7f1103aC122e"},DerifyStaking:{abi:y,address:"0x6059021fBD2D48460B4deCD42b9D6Af5472e4fee"},DUSD:{abi:m,address:"0xcA6C365a22e18a4fE36B175899E918357489A416"},bDRD:{abi:f,address:"0x0cA0e7810d00A9268478aF0eC03C49bD37862D00"}},b=n("901e"),h=n.n(b);window.BigNumber=h.a;var v=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"LONG",get:function(){return 0}},{key:"SHORT",get:function(){return 1}},{key:"HEDGE",get:function(){return 2}}]),e}(),g=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"LimitOrder",get:function(){return 0}},{key:"StopProfitOrder",get:function(){return 1}},{key:"StopLossOrder",get:function(){return 2}}]),e}(),w=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"MarketOrder",get:function(){return 0}},{key:"LimitOrder",get:function(){return 1}}]),e}(),P={BTC:T.DerifyDerivative.BTC.token,ETH:T.DerifyDerivative.ETH.token,DUSD:T.DUSD.address,bDRD:T.bDRD.address,USDT:T.bDRD.address},D={},k=!0,O=8;function x(e){return S(e,O)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"0x"+new h.a(e).shiftedBy(t).toString(16)}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new h.a(e).shiftedBy(t).toFixed(n)}function M(e){return S(e)}function A(e){return new h.a(e).shiftedBy(O).toNumber()}function _(e){var t=new h.a(e);return t.shiftedBy(-O).toNumber()}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return B(e,-O,t)}var C=function(){function e(t){Object(s["a"])(this,e);var n={from:t},a=new p.a,i=null,r=window.ethereum;a.setProvider(r),this.web3=a,this.from=t,this.DerifyBond=new a.eth.Contract(T.DerifyBond.abi,T.DerifyBond.address,Object.assign({gasPrice:i},n)),this.DerifyDerivative={BTC:new a.eth.Contract(T.DerifyDerivative.abi,T.DerifyDerivative.BTC.address,Object.assign({gasPrice:i},n)),ETH:new a.eth.Contract(T.DerifyDerivative.abi,T.DerifyDerivative.ETH.address,Object.assign({gasPrice:i},n))},this.DerifyExchange=new a.eth.Contract(T.DerifyExchange.abi,T.DerifyExchange.address,Object.assign({gasPrice:i},n)),this.DerifyStaking=new a.eth.Contract(T.DerifyStaking.abi,T.DerifyStaking.address,Object.assign({gasPrice:i},n)),this.DUSD=new a.eth.Contract(T.DUSD.abi,T.DUSD.address,Object.assign({gasPrice:i},n))}return Object(o["a"])(e,[{key:"deposit",value:function(e){var t=this,n=(this.web3,this.from,this.DUSD);return new Promise((function(a,i){Object(r["a"])(regeneratorRuntime.mark((function r(){var s,o,u,p,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.methods.decimals().call();case 2:return s=r.sent,o=parseInt(s),u=S(e,o-O),r.next=7,n.methods.approve(T.DerifyExchange.address,u).send();case 7:if(p=r.sent,!p){r.next=21;break}return r.prev=9,r.next=12,t.DerifyExchange.methods.deposit(e).send();case 12:d=r.sent,a(d),r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](9),i(r.t0);case 19:r.next=22;break;case 21:i("approve failed");case 22:case"end":return r.stop()}}),r,null,[[9,16]])})))()}))}},{key:"withdraw",value:function(e){return this.DerifyExchange.methods.withdraw(e).send()}},{key:"openPosition",value:function(e){var t=e.token,n=e.side,a=e.openType,i=e.size,r=e.price,s=e.leverage;return this.DerifyExchange.methods.openPosition(t,n,a,i,r,s).send()}},{key:"closePosition",value:function(e,t,n){return this.DerifyExchange.methods.closePosition(e,t,n).send()}},{key:"closeAllPositions",value:function(){return this.DerifyExchange.methods.closeAllPositions().send()}},{key:"getTraderAccount",value:function(e){return this.DerifyExchange.methods.getTraderAccount(e).call()}},{key:"getTraderOpenUpperBound",value:function(e){var t=e.marketIdAddress,n=e.trader,a=e.openType,i=e.price,r=e.leverage;return this.DerifyExchange.methods.getTraderOpenUpperBound(t,n,a,i,r).call()}},{key:"getSysOpenUpperBound",value:function(e){var t=e.marketIdAddress,n=e.side;return this.DerifyExchange.methods.getSysOpenUpperBound(t,n).call()}},{key:"getTraderPositionVariables",value:function(e){e.trader,e.marketIdAddress;var t=e.side,n=e.spotPrice,a=e.size,i=e.leverage,r=e.averagePrice;return this.DerifyExchange.methods.getTraderPositionVariables(t,n,a,i,r).call()}},{key:"getTraderVariables",value:function(e){return this.DerifyExchange.methods.getTraderVariables(e).call()}},{key:"getTraderPositionLiquidatePrice",value:function(e){var t=e.side,n=e.spotPrice,a=e.size,i=(e.marginMaintenanceRatio,e.marginBalance),r=e.totalPositionAmount;return this.DerifyExchange.methods.getTraderPositionLiquidatePrice(t,n,a,i,r).call()}},{key:"onDeposit",value:function(e,t){this.DerifyExchange.events.Deposit({user:e},t)}},{key:"onWithdraw",value:function(e,t){this.DerifyExchange.events.Withdraw({user:e},t)}},{key:"__getDerifyDerivativeContract",value:function(e){return T.DerifyDerivative.BTC.token===e?this.DerifyDerivative.BTC:this.DerifyDerivative.ETH}},{key:"getTraderPosition",value:function(e,t){return this.__getDerifyDerivativeContract(t).methods.getTraderDerivativePositions(e).call()}},{key:"setSpotPrice",value:function(e,t){return this.__getDerifyDerivativeContract(e).methods.setSpotPrice(e,t).send()}},{key:"getSpotPrice",value:function(e){return this.__getDerifyDerivativeContract(e).methods.getSpotPrice().call()}},{key:"orderStopPosition",value:function(e){var t=e.token,n=e.trader,a=e.side,i=e.stopType,r=e.stopPrice;return this.__getDerifyDerivativeContract(t).methods.orderStopPosition(n,a,i,r).send()}},{key:"cancleOrderedPosition",value:function(e){var t=e.marketIdAddress,n=e.trader,a=e.orderType,i=e.side,r=e.timestamp;return 0===a?this.__getDerifyDerivativeContract(t).methods.cancleOrderedLimitPosition(n,i,r).send():this.__getDerifyDerivativeContract(t).methods.cancleOrderedStopPosition(n,a,i).send()}},{key:"cancleAllOrderedPositions",value:function(e,t){return this.__getDerifyDerivativeContract(e).methods.cancleAllOrderedPositions(t).send()}},{key:"getPositionChangeFeeRatio",value:function(e){return this.__getDerifyDerivativeContract(e).methods.getPositionChangeFeeRatio().call()}},{key:"getTradingFee",value:function(e,t,n){return this.__getDerifyDerivativeContract(e).methods.getTradingFee(t,n).call()}},{key:"getPositionChangeFee",value:function(e,t,n,a,i){return this.__getDerifyDerivativeContract(e).methods.getPositionChangeFee(t,n,a,i).call()}},{key:"withdrawBond",value:function(e){return this.DerifyBond.methods.withdrawBond(e).send()}},{key:"exchangeBond",value:function(e){var t=e.amount,n=e.bondAccountType;return this.DerifyBond.methods.exchangeBond(t,n).send()}},{key:"depositBondToBank",value:function(e){var t=e.amount,n=e.bondAccountType;return this.DerifyBond.methods.depositBondToBank(t,n).send()}},{key:"redeemBondFromBank",value:function(e){var t=e.amount,n=e.bondAccountType;return this.DerifyBond.methods.redeemBondFromBank(t,n).send()}},{key:"getBondInfo",value:function(e){return this.DerifyBond.methods.getBondInfo(e).call()}},{key:"getExchangeBondSizeUpperBound",value:function(e,t){return this.DerifyBond.methods.getExchangeBondSizeUpperBound(e,t).call()}},{key:"withdrawPMReward",value:function(e){return this.DerifyStaking.methods.withdrawPMReward(e).send()}},{key:"getPMReward",value:function(e){return this.DerifyStaking.methods.getPMReward(e).call()}},{key:"getTraderAllPosition",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,s,o,u,p,d,c,l,y,m,f,T,b,h,w,P;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new I,r=[],s=new U,e.next=5,this.getTraderPosition(t,n);case 5:return s=e.sent,e.next=8,this.__getTraderVariablesWithCache(t);case 8:if(o=e.sent,!(s.long&&s.long.leverage>0&&s.long.size>0)){e.next=14;break}return e.next=12,this.__convertPositionToPositionView(t,n,v.LONG,s.long,s.longOrderStopProfitPosition,s.longOrderStopLossPosition,o);case 12:u=e.sent,r.push(u);case 14:if(!(s.short&&s.short.leverage>0&&s.short.size>0)){e.next=19;break}return e.next=17,this.__convertPositionToPositionView(t,n,v.SHORT,s.short,s.shortOrderStopProfitPosition,s.shortOrderStopLossPosition,o);case 17:p=e.sent,r.push(p);case 19:a.positions=r,d=[],c=s.longOrderOpenPosition,l=Object(i["a"])(c);try{for(l.s();!(y=l.n()).done;)m=y.value,f=new E,f.side=v.LONG,f.coinAddress=n,f.orderType=g.LimitOrder,s.longOrderStopProfitPosition||(f.stopProfitPrice=s.longOrderStopProfitPosition.stopProfitPrice),s.longOrderStopLossPosition||(f.stopLossPrice=s.longOrderStopLossPosition.stopLossPrice),Object.assign(f,m),d.push(f)}catch(D){l.e(D)}finally{l.f()}T=s.shortOrderOpenPosition,b=Object(i["a"])(T);try{for(b.s();!(h=b.n()).done;)w=h.value,P=new E,P.side=v.SHORT,P.coinAddress=n,P.orderType=g.LimitOrder,s.shortOrderStopProfitPosition||(P.stopProfitPrice=s.shortOrderStopProfitPosition.stopProfitPrice),s.shortOrderStopProfitPosition||(P.stopLossPrice=s.shortOrderStopProfitPosition.stopLossPrice),Object.assign(P,w),d.push(P)}catch(D){b.e(D)}finally{b.f()}return a.orderPositions=d,e.abrupt("return",a);case 29:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"__convertPositionToPositionView",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,a,i,r,s,o){var u,p,d,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=new j,u.coinAddress=n,u.side=a,u.size=i.size,u.leverage=i.leverage,u.averagePrice=i.price,u.timestamp=i.timestamp,u.stopLossPrice=s.stopPrice,u.stopProfitPrice=r.stopPrice,e.next=11,this.getSpotPrice();case 11:return u.spotPrice=e.sent,p={trader:t,marketIdAddress:n,side:a,spotPrice:u.spotPrice,size:u.size,leverage:Math.max(u.leverage,1),averagePrice:u.averagePrice},e.next=15,this.getTraderPositionVariables(p);case 15:return d=e.sent,u.margin=d.margin,u.unrealizedPnl=d.unrealizedPnl,u.margin=d.margin,u.marginBalance=o.marginBalance,u.totalPositionAmount=o.totalPositionAmount,u.marginRate=o.marginRate,c={side:u.side,spotPrice:u.spotPrice,size:u.size,marginMaintenanceRatio:u.marginRate,marginBalance:u.marginBalance,totalPositionAmount:u.totalPositionAmount},e.next=25,this.getTraderPositionLiquidatePrice(c);case 25:return u.liquidatePrice=e.sent,e.abrupt("return",u);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n,a,i,r,s,o){return e.apply(this,arguments)}return t}()},{key:"__getTraderVariablesWithCache",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===D[t]){e.next=2;break}return e.abrupt("return",D[t]);case 2:return e.abrupt("return",this.getTraderVariables(t));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),j=function e(){Object(s["a"])(this,e),Object(a["a"])(this,"coinAddress",void 0),Object(a["a"])(this,"side",void 0),Object(a["a"])(this,"size",void 0),Object(a["a"])(this,"leverage",void 0),Object(a["a"])(this,"averagePrice",void 0),Object(a["a"])(this,"timestamp",void 0),Object(a["a"])(this,"unrealizedPnl",void 0),Object(a["a"])(this,"returnRate",void 0),Object(a["a"])(this,"spotPrice",void 0),Object(a["a"])(this,"margin",void 0),Object(a["a"])(this,"marginRate",void 0),Object(a["a"])(this,"marginBalance",void 0),Object(a["a"])(this,"totalPositionAmount",void 0),Object(a["a"])(this,"stopProfitPrice",void 0),Object(a["a"])(this,"stopLossPrice",void 0),Object(a["a"])(this,"liquidatePrice",void 0)},E=function e(){Object(s["a"])(this,e),Object(a["a"])(this,"coinAddress",void 0),Object(a["a"])(this,"orderType",void 0),Object(a["a"])(this,"side",void 0),Object(a["a"])(this,"stopProfitPrice",void 0),Object(a["a"])(this,"stopLossPrice",void 0),Object(a["a"])(this,"stopTimestamp",void 0),Object(a["a"])(this,"limitOrders",void 0)},I=function e(){Object(s["a"])(this,e),Object(a["a"])(this,"positions",void 0),Object(a["a"])(this,"orderPositions",void 0)},U=function e(){Object(s["a"])(this,e),Object(a["a"])(this,"isUsed",void 0),Object(a["a"])(this,"long",void 0),Object(a["a"])(this,"short",void 0),Object(a["a"])(this,"longOrderOpenPosition",void 0),Object(a["a"])(this,"shortOrderOpenPosition",void 0),Object(a["a"])(this,"longOrderStopProfitPosition",void 0),Object(a["a"])(this,"longOrderStopLossPosition",void 0),Object(a["a"])(this,"shortOrderStopProfitPosition",void 0),Object(a["a"])(this,"shortOrderStopLossPosition",void 0)},F=function e(){Object(s["a"])(this,e),Object(a["a"])(this,"isUsed",void 0),Object(a["a"])(this,"size",void 0),Object(a["a"])(this,"price",void 0),Object(a["a"])(this,"leverage",void 0),Object(a["a"])(this,"timestamp",void 0)};window.Contract=C},fa7d:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));n("b680"),n("a9e3");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(/^-?\d+\.?\d*$/.test("".concat(e))){var a=parseFloat(e);return a*=Math.pow(10,t),Number(a).toFixed(n)}return e}function i(e,t){return e||t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e&&null!==a)return a;if(/^-?\d+\.?\d*$/.test("".concat(e))){var i=parseFloat(e);return 0===i&&null!==a?a:n&&i>0?"+"+Number(i).toFixed(t):Number(i).toFixed(t)}return e}}});
//# sourceMappingURL=app.2c4f9c69.js.map